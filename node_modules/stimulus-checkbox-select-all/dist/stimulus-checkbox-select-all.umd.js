(function(h,s){typeof exports=="object"&&typeof module!="undefined"?module.exports=s(require("@hotwired/stimulus")):typeof define=="function"&&define.amd?define(["@hotwired/stimulus"],s):(h=typeof globalThis!="undefined"?globalThis:h||self,h["stimulus-checkbox-select-all"]=s(h.Stimulus))})(this,function(h){"use strict";class s extends h.Controller{initialize(){this.toggle=this.toggle.bind(this),this.refresh=this.refresh.bind(this)}connect(){!this.hasCheckboxAllTarget||(this.checkboxAllTarget.addEventListener("change",this.toggle),this.checkboxTargets.forEach(e=>e.addEventListener("change",this.refresh)),this.refresh())}disconnect(){!this.hasCheckboxAllTarget||(this.checkboxAllTarget.removeEventListener("change",this.toggle),this.checkboxTargets.forEach(e=>e.removeEventListener("change",this.refresh)))}toggle(e){e.preventDefault(),this.checkboxTargets.forEach(t=>{t.checked=e.target.checked,this.triggerInputEvent(t)})}refresh(){const e=this.checkboxTargets.length,t=this.checked.length;this.checkboxAllTarget.checked=t>0,this.checkboxAllTarget.indeterminate=t>0&&t<e}triggerInputEvent(e){const t=new Event("input",{bubbles:!1,cancelable:!0});e.dispatchEvent(t)}get checked(){return this.checkboxTargets.filter(e=>e.checked)}get unchecked(){return this.checkboxTargets.filter(e=>!e.checked)}}return s.targets=["checkboxAll","checkbox"],s});
