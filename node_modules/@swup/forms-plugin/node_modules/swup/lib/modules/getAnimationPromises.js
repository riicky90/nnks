'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _utils = require('../utils');

var _helpers = require('../helpers');

var getAnimationPromises = function getAnimationPromises() {
	var _this = this;

	var promises = [];
	var animatedElements = (0, _utils.queryAll)(this.options.animationSelector, document.body);

	if (!animatedElements.length) {
		console.error('No animated elements found by selector ' + this.options.animationSelector);
		return [Promise.resolve()];
	}

	animatedElements.forEach(function (element) {
		var transitionDuration = window.getComputedStyle(element)[(0, _helpers.transitionProperty)() + 'Duration'];
		// Resolve immediately if no transition defined
		if (!transitionDuration || transitionDuration == '0s') {
			console.error('No CSS transition duration defined for element of selector ' + _this.options.animationSelector);
			promises.push(Promise.resolve());
			return;
		}
		var promise = new Promise(function (resolve) {
			element.addEventListener((0, _helpers.transitionEnd)(), function (event) {
				if (element == event.target) {
					resolve();
				}
			});
		});
		promises.push(promise);
	});

	return promises;
};

exports.default = getAnimationPromises;